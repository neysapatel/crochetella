{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../actions/orderActions';function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var cartItems=cart.cartItems,shipping=cart.shipping,payment=cart.payment;if(!shipping.address){props.history.push(\"/shipping\");}else if(!payment.paymentMethod){props.history.push(\"/payment\");}var itemsPrice=cartItems.reduce(function(a,c){return a+c.price*c.qty;},0);var shippingPrice=itemsPrice>100?0.00:15.00;var taxPrice_unrounded=0.13*itemsPrice;var taxPrice=Math.round(taxPrice_unrounded*100)/100;var totalPrice=itemsPrice+shippingPrice+taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){// create an order\ndispatch(createOrder({orderItems:cartItems,shipping:shipping,payment:payment,itemsPrice:itemsPrice,shippingPrice:shippingPrice,taxPrice:taxPrice,totalPrice:totalPrice}));};useEffect(function(){if(success){props.history.push(\"/order/\"+order._id);}},[success]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-info\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Please verify the following shipping/billing address:\"),/*#__PURE__*/React.createElement(\"div\",null,cart.shipping.address,\", \",cart.shipping.city,\", \",cart.shipping.country,\", \",cart.shipping.postalCode)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"You are paying with:\"),/*#__PURE__*/React.createElement(\"div\",null,cart.payment.paymentMethod)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"cart-list-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Your Cart:\"),/*#__PURE__*/React.createElement(\"div\",null,\"Your subtotal:\")),cartItems.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Your cart is currently empty!\"):cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"cart-image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-name\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\"+item.product},item.name)),/*#__PURE__*/React.createElement(\"div\",null,\"Quantity Selected: \",item.qty)),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-price\"},\"$\",item.price,\" Per Item\"));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-action\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Verify the following details:\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Pre-Tax Subtotal: $\",itemsPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Cost of Shipping: $\",shippingPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"13% Tax in Ontario: $\",taxPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"YOUR ORDER TOTAL: $\",totalPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h1\",null)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"button primary full-width\",onClick:placeOrderHandler},\"Place Order\"))))));}export default PlaceOrderScreen;","map":{"version":3,"sources":["C:/Users/patel/Documents/Side Projects/cr/crochetella/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","CheckoutSteps","createOrder","PlaceOrderScreen","props","cart","state","orderCreate","loading","success","error","order","cartItems","shipping","payment","address","history","push","paymentMethod","itemsPrice","reduce","a","c","price","qty","shippingPrice","taxPrice_unrounded","taxPrice","Math","round","totalPrice","dispatch","placeOrderHandler","orderItems","_id","city","country","postalCode","length","map","item","image","product","name"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport CheckoutSteps from '../components/CheckoutSteps';\r\nimport { createOrder } from '../actions/orderActions';\r\nfunction PlaceOrderScreen(props) {\r\n\r\n  const cart = useSelector(state => state.cart);\r\n  const orderCreate = useSelector(state => state.orderCreate);\r\n  const { loading, success, error, order } = orderCreate;\r\n\r\n  const { cartItems, shipping, payment } = cart;\r\n  if (!shipping.address) {\r\n    props.history.push(\"/shipping\");\r\n  } else if (!payment.paymentMethod) {\r\n    props.history.push(\"/payment\");\r\n  }\r\n  const itemsPrice = cartItems.reduce((a, c) => a + c.price * c.qty, 0);\r\n  const shippingPrice = itemsPrice > 100 ? 0.00 : 15.00;\r\n  const taxPrice_unrounded = (0.13 * itemsPrice);\r\n  const taxPrice = Math.round(taxPrice_unrounded * 100) / 100\r\n  const totalPrice = (itemsPrice + shippingPrice + taxPrice);\r\n  \r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const placeOrderHandler = () => {\r\n    // create an order\r\n    dispatch(createOrder({\r\n      orderItems: cartItems, shipping, payment, itemsPrice, shippingPrice,\r\n      taxPrice, totalPrice\r\n    }));\r\n  }\r\n  useEffect(() => {\r\n    if (success) {\r\n      props.history.push(\"/order/\" + order._id);\r\n    }\r\n\r\n  }, [success]);\r\n\r\n  return <div>\r\n    <CheckoutSteps step1 step2 step3 step4 ></CheckoutSteps>\r\n    <div className=\"placeorder\">\r\n      <div className=\"placeorder-info\">\r\n        <div>\r\n          <h3>\r\n            Please verify the following shipping/billing address:\r\n          </h3>\r\n          <div>\r\n            {cart.shipping.address}, {cart.shipping.city}, {cart.shipping.country}, {cart.shipping.postalCode}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <h3>You are paying with:</h3>\r\n          <div>\r\n            {cart.payment.paymentMethod}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <ul className=\"cart-list-container\">\r\n            <li>\r\n              <h3>\r\n                Your Cart:\r\n          </h3>\r\n              <div>\r\n                Your subtotal:\r\n          </div>\r\n            </li>\r\n            {\r\n              cartItems.length === 0 ?\r\n                <div>\r\n                  Your cart is currently empty!\r\n          </div>\r\n                :\r\n                cartItems.map(item =>\r\n                  <li>\r\n                    <div className=\"cart-image\">\r\n                      <img src={item.image} alt=\"product\" />\r\n                    </div>\r\n                    <div className=\"cart-name\">\r\n                      <div>\r\n                        <Link to={\"/product/\" + item.product}>\r\n                          {item.name}\r\n                        </Link>\r\n\r\n                      </div>\r\n                      <div>\r\n                        Quantity Selected: {item.qty}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"cart-price\">\r\n                      ${item.price} Per Item\r\n                    </div>\r\n                  </li>\r\n                )\r\n            }\r\n          </ul>\r\n        </div>\r\n\r\n      \r\n      </div>\r\n      <div className=\"placeorder-action\">\r\n        <ul>\r\n          <li>\r\n            <h3>Verify the following details:</h3>\r\n          </li>\r\n          <li>\r\n            <div>Pre-Tax Subtotal: ${itemsPrice}</div>\r\n          </li>\r\n          <li>\r\n            <div>Cost of Shipping: ${shippingPrice}</div>\r\n          </li>\r\n          <li>\r\n            <div>13% Tax in Ontario: ${taxPrice}</div>\r\n          </li>\r\n          <li>\r\n            <div>YOUR ORDER TOTAL: ${totalPrice}</div>\r\n          </li>\r\n          <li>\r\n            <h1></h1>\r\n          </li>\r\n          <li>\r\n            <button className=\"button primary full-width\" onClick={placeOrderHandler} >Place Order</button>\r\n          </li>\r\n        </ul>\r\n\r\n\r\n\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n}\r\n\r\nexport default PlaceOrderScreen;"]},"metadata":{},"sourceType":"module"}