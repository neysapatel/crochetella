{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\patel\\\\Documents\\\\Side Projects\\\\cr\\\\crochetella\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{logout,update}from'../actions/userActions';import{listMyOrders}from'../actions/orderActions';import{useDispatch,useSelector}from'react-redux';function ProfileScreen(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var dispatch=useDispatch();var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var handleLogout=function handleLogout(){dispatch(logout());props.history.push(\"/signin\");};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(update({userId:userInfo._id,email:email,name:name,password:password}));};var userUpdate=useSelector(function(state){return state.userUpdate;});var loading=userUpdate.loading,success=userUpdate.success,error=userUpdate.error;var myOrderList=useSelector(function(state){return state.myOrderList;});var loadingOrders=myOrderList.loading,orders=myOrderList.orders,errorOrders=myOrderList.error;useEffect(function(){if(userInfo){console.log(userInfo.name);setEmail(userInfo.email);setName(userInfo.name);setPassword(userInfo.password);}dispatch(listMyOrders());return function(){};},[userInfo]);return/*#__PURE__*/React.createElement(\"div\",{className:\"profile\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:submitHandler},/*#__PURE__*/React.createElement(\"ul\",{className:\"form-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:handleLogout,className:\"button secondary full-width\"},\"Log out of your account!\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-orders content-margined\"},loadingOrders?/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"):errorOrders?/*#__PURE__*/React.createElement(\"div\",null,errorOrders,\" \"):/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"DATE\"),/*#__PURE__*/React.createElement(\"th\",null,\"TOTAL\"),/*#__PURE__*/React.createElement(\"th\",null,\"PAID\"),/*#__PURE__*/React.createElement(\"th\",null,\"ACTIONS\"))),/*#__PURE__*/React.createElement(\"tbody\",null,orders.map(function(order){return/*#__PURE__*/React.createElement(\"tr\",{key:order._id},/*#__PURE__*/React.createElement(\"td\",null,order._id),/*#__PURE__*/React.createElement(\"td\",null,order.createdAt),/*#__PURE__*/React.createElement(\"td\",null,order.totalPrice),/*#__PURE__*/React.createElement(\"td\",null,order.isPaid),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"/order/\"+order._id},\"DETAILS\")));})))));}export default ProfileScreen;","map":{"version":3,"sources":["C:/Users/patel/Documents/Side Projects/cr/crochetella/frontend/src/screens/ProfileScreen.js"],"names":["React","useState","useEffect","Link","logout","update","listMyOrders","useDispatch","useSelector","ProfileScreen","props","name","setName","password","setPassword","email","setEmail","dispatch","userSignin","state","userInfo","handleLogout","history","push","submitHandler","e","preventDefault","userId","_id","userUpdate","loading","success","error","myOrderList","loadingOrders","orders","errorOrders","console","log","map","order","createdAt","totalPrice","isPaid"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { logout, update } from '../actions/userActions';\r\nimport { listMyOrders } from '../actions/orderActions';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nfunction ProfileScreen(props) {\r\n  const [name, setName] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const dispatch = useDispatch();\r\n\r\n  const userSignin = useSelector(state => state.userSignin);\r\n  const { userInfo } = userSignin;\r\n  const handleLogout = () => {\r\n    dispatch(logout());\r\n    props.history.push(\"/signin\");\r\n  }\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(update({ userId: userInfo._id, email, name, password }))\r\n  }\r\n  const userUpdate = useSelector(state => state.userUpdate);\r\n  const { loading, success, error } = userUpdate;\r\n\r\n  const myOrderList = useSelector(state => state.myOrderList);\r\n  const { loading: loadingOrders, orders, error: errorOrders } = myOrderList;\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      console.log(userInfo.name)\r\n      setEmail(userInfo.email);\r\n      setName(userInfo.name);\r\n      setPassword(userInfo.password);\r\n    }\r\n    dispatch(listMyOrders());\r\n    return () => {\r\n\r\n    };\r\n  }, [userInfo])\r\n\r\n  return <div className=\"profile\">\r\n    <div className=\"profile-info\">\r\n      <div className=\"form\">\r\n        <form onSubmit={submitHandler} >\r\n          <ul className=\"form-container\">\r\n\r\n            <li>\r\n              <button type=\"button\" onClick={handleLogout} className=\"button secondary full-width\">Log out of your account!</button>\r\n            </li>\r\n\r\n          </ul>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <div className=\"profile-orders content-margined\">\r\n      {\r\n        loadingOrders ? <div>Loading...</div> :\r\n          errorOrders ? <div>{errorOrders} </div> :\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>DATE</th>\r\n                  <th>TOTAL</th>\r\n                  <th>PAID</th>\r\n                  <th>ACTIONS</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {orders.map(order => <tr key={order._id}>\r\n                  <td>{order._id}</td>\r\n                  <td>{order.createdAt}</td>\r\n                  <td>{order.totalPrice}</td>\r\n                  <td>{order.isPaid}</td>\r\n                  <td>\r\n                    <Link to={\"/order/\" + order._id}>DETAILS</Link>\r\n                  </td>\r\n                </tr>)}\r\n              </tbody>\r\n            </table>\r\n      }\r\n    </div>\r\n  </div>\r\n}\r\n\r\nexport default ProfileScreen;"]},"metadata":{},"sourceType":"module"}