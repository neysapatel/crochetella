{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\patel\\\\Documents\\\\Side Projects\\\\cr\\\\crochetella\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\patel\\\\Documents\\\\Side Projects\\\\cr\\\\crochetella\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{detailsProduct,saveProductReview}from'../actions/productActions';import Rating from'../components/Rating';import{PRODUCT_REVIEW_SAVE_RESET}from'../constants/productConstants';function ProductScreen(props){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var productDetails=useSelector(function(state){return state.productDetails;});var product=productDetails.product,loading=productDetails.loading,error=productDetails.error;var productReviewSave=useSelector(function(state){return state.productReviewSave;});var productSaveSuccess=productReviewSave.success;var dispatch=useDispatch();useEffect(function(){if(productSaveSuccess){alert('Thank you for your review!');setRating(0);setComment('');dispatch({type:PRODUCT_REVIEW_SAVE_RESET});}dispatch(detailsProduct(props.match.params.id));return function(){//\n};},[productSaveSuccess]);var submitHandler=function submitHandler(e){e.preventDefault();// dispatch actions\ndispatch(saveProductReview(props.match.params.id,{name:userInfo.name,rating:rating,comment:comment}));};var handleAddToCart=function handleAddToCart(){props.history.push('/cart/'+props.match.params.id+'?qty='+qty);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"return-home\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"RETURN TO THE HOME PAGE\")),loading?/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"):error?/*#__PURE__*/React.createElement(\"div\",null,error,\" \"):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"details-image\"},/*#__PURE__*/React.createElement(\"img\",{src:product.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"details-info\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,product.name)),/*#__PURE__*/React.createElement(\"div\",{className:\"content-margined\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Ratings:\",!product.reviews.length&&/*#__PURE__*/React.createElement(\"div\",null,\"There are currently no ratings or reviews! Add \",/*#__PURE__*/React.createElement(Link,{to:\"/signin\"},\"your rating and review\"),\" of this product today!\"),\" \"),/*#__PURE__*/React.createElement(\"ul\",{className:\"review\",id:\"reviews\"},product.reviews.map(function(review){return/*#__PURE__*/React.createElement(\"li\",{key:review._id},/*#__PURE__*/React.createElement(\"div\",null,review.name),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Rating,{value:review.rating})),/*#__PURE__*/React.createElement(\"div\",null,review.createdAt.substring(0,10)),/*#__PURE__*/React.createElement(\"div\",null,review.comment));}),/*#__PURE__*/React.createElement(\"li\",null,userInfo?/*#__PURE__*/React.createElement(\"form\",{onSubmit:submitHandler},/*#__PURE__*/React.createElement(\"ul\",{className:\"form-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"rating\"},\"On a scale of 1 to 5, how would you rate your experience with this product?\"),/*#__PURE__*/React.createElement(\"select\",{name:\"rating\",id:\"rating\",value:rating,onChange:function onChange(e){return setRating(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",{value:\"5\"},\"5 - Excellent Experience\"),/*#__PURE__*/React.createElement(\"option\",{value:\"4\"},\"4\"),/*#__PURE__*/React.createElement(\"option\",{value:\"3\"},\"3\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2\"},\"2\"),/*#__PURE__*/React.createElement(\"option\",{value:\"1\"},\"1 - Unsatisfactory Experience\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"comment\"},\"Please take a moment to write a review and describe your experience with this product:\"),/*#__PURE__*/React.createElement(\"textarea\",{name:\"comment\",value:comment,onChange:function onChange(e){return setComment(e.target.value);}})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"button primary\"},\"Submit! Thank you for your review!\")))):/*#__PURE__*/React.createElement(\"div\",null))))),/*#__PURE__*/React.createElement(\"div\",{className:\"details-action\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,\"In Stock?:\",' ',product.countInStock>0?'Yes, currently available!':'Sorry, currently unavailable!'),/*#__PURE__*/React.createElement(\"li\",null,\"Price: $\",product.price),/*#__PURE__*/React.createElement(\"li\",null,\"How Many?\",' ',/*#__PURE__*/React.createElement(\"select\",{value:qty,onChange:function onChange(e){setQty(e.target.value);}},_toConsumableArray(Array(product.countInStock).keys()).map(function(x){return/*#__PURE__*/React.createElement(\"option\",{key:x+1,value:x+1},x+1);}))),/*#__PURE__*/React.createElement(\"li\",null,product.countInStock>0&&/*#__PURE__*/React.createElement(\"button\",{onClick:handleAddToCart,className:\"button primary\"},\"Add to Cart\"))))))));}export default ProductScreen;","map":{"version":3,"sources":["C:/Users/patel/Documents/Side Projects/cr/crochetella/frontend/src/screens/ProductScreen.js"],"names":["React","useEffect","useState","Link","useSelector","useDispatch","detailsProduct","saveProductReview","Rating","PRODUCT_REVIEW_SAVE_RESET","ProductScreen","props","qty","setQty","rating","setRating","comment","setComment","userSignin","state","userInfo","productDetails","product","loading","error","productReviewSave","productSaveSuccess","success","dispatch","alert","type","match","params","id","submitHandler","e","preventDefault","name","handleAddToCart","history","push","image","reviews","length","map","review","_id","createdAt","substring","target","value","countInStock","price","Array","keys","x"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { detailsProduct, saveProductReview } from '../actions/productActions';\r\nimport Rating from '../components/Rating';\r\nimport { PRODUCT_REVIEW_SAVE_RESET } from '../constants/productConstants';\r\n\r\nfunction ProductScreen(props) {\r\n  const [qty, setQty] = useState(1);\r\n  const [rating, setRating] = useState(0);\r\n  const [comment, setComment] = useState('');\r\n  const userSignin = useSelector((state) => state.userSignin);\r\n  const { userInfo } = userSignin;\r\n  const productDetails = useSelector((state) => state.productDetails);\r\n  const { product, loading, error } = productDetails;\r\n  const productReviewSave = useSelector((state) => state.productReviewSave);\r\n  const { success: productSaveSuccess } = productReviewSave;\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (productSaveSuccess) {\r\n      alert('Thank you for your review!');\r\n      setRating(0);\r\n      setComment('');\r\n      dispatch({ type: PRODUCT_REVIEW_SAVE_RESET });\r\n    }\r\n    dispatch(detailsProduct(props.match.params.id));\r\n    return () => {\r\n      //\r\n    };\r\n  }, [productSaveSuccess]);\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    // dispatch actions\r\n    dispatch(\r\n      saveProductReview(props.match.params.id, {\r\n        name: userInfo.name,\r\n        rating: rating,\r\n        comment: comment,\r\n      })\r\n    );\r\n  };\r\n  const handleAddToCart = () => {\r\n    props.history.push('/cart/' + props.match.params.id + '?qty=' + qty);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"return-home\">\r\n        <Link to=\"/\">RETURN TO THE HOME PAGE</Link>\r\n      </div>\r\n      {loading ? (\r\n        <div>Loading...</div>\r\n      ) : error ? (\r\n        <div>{error} </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"details\">\r\n            <div className=\"details-image\">\r\n              <img src={product.image} alt=\"product\"></img>\r\n            </div>\r\n            <div className=\"details-info\">\r\n              <ul>\r\n                <li>\r\n                  <h3>{product.name}</h3>\r\n                </li>\r\n                <div className=\"content-margined\">\r\n            <h4>Ratings:\r\n            {!product.reviews.length && <div>There are currently no ratings or reviews! Add <Link to=\"/signin\">your rating and review</Link> of this product today!</div>} </h4>\r\n\r\n            <ul className=\"review\" id=\"reviews\">\r\n              {product.reviews.map((review) => (\r\n                <li key={review._id}>\r\n                  <div>{review.name}</div>\r\n                  <div>\r\n                    <Rating value={review.rating}></Rating>\r\n                  </div>\r\n                  <div>{review.createdAt.substring(0, 10)}</div>\r\n                  <div>{review.comment}</div>\r\n                </li>\r\n              ))}\r\n              <li>\r\n                {userInfo ? (\r\n                  <form onSubmit={submitHandler}>\r\n                    <ul className=\"form-container\">\r\n                      <li>\r\n                        <label htmlFor=\"rating\">On a scale of 1 to 5, how would you rate your experience with this product?</label>\r\n                        <select\r\n                          name=\"rating\"\r\n                          id=\"rating\"\r\n                          value={rating}\r\n                          onChange={(e) => setRating(e.target.value)}\r\n                        >\r\n                          <option value=\"5\">5 - Excellent Experience</option>\r\n                          <option value=\"4\">4</option>\r\n                          <option value=\"3\">3</option>\r\n                          <option value=\"2\">2</option>\r\n                          <option value=\"1\">1 - Unsatisfactory Experience</option>\r\n                        </select>\r\n                      </li>\r\n                      <li>\r\n                        <label htmlFor=\"comment\">Please take a moment to write a review and describe your experience with this product:</label>\r\n                        <textarea\r\n                          name=\"comment\"\r\n                          value={comment}\r\n                          onChange={(e) => setComment(e.target.value)}\r\n                        ></textarea>\r\n                      </li>\r\n                      <li>\r\n                        <button type=\"submit\" className=\"button primary\">\r\n                          Submit! Thank you for your review!\r\n                        </button>\r\n                      </li>\r\n                    </ul>\r\n                  </form>\r\n                ) : (\r\n                  <div></div>\r\n                )}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n              </ul>\r\n            \r\n            <div className=\"details-action\">\r\n              <ul>\r\n                <li>\r\n                  In Stock?:{' '}\r\n                  {product.countInStock > 0 ? 'Yes, currently available!' : 'Sorry, currently unavailable!'}\r\n                </li>\r\n                <li>Price: ${product.price}</li>\r\n                <li>\r\n                  How Many?{' '}\r\n                  <select\r\n                    value={qty}\r\n                    onChange={(e) => {\r\n                      setQty(e.target.value);\r\n                    }}\r\n                  >\r\n                    {[...Array(product.countInStock).keys()].map((x) => (\r\n                      <option key={x + 1} value={x + 1}>\r\n                        {x + 1}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </li>\r\n                <li>\r\n                  {product.countInStock > 0 && (\r\n                    <button\r\n                      onClick={handleAddToCart}\r\n                      className=\"button primary\"\r\n                    >\r\n                      Add to Cart\r\n                    </button>\r\n                  )}\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nexport default ProductScreen;\r\n"]},"metadata":{},"sourceType":"module"}